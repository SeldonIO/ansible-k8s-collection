---
- name: "Install OpenSearch Dashboards"
  kubernetes.core.helm:
    chart_repo_url: "{{ elastic_opensearch_chart_repo }}"
    chart_ref: "{{ elastic_opensearch_dashboards_chart_name }}"
    chart_version: "{{ elastic_opensearch_dashboards_chart_version }}"
    release_namespace: "{{ elastic_opensearch_namespace }}"
    release_name: "opensearch-dashboards"
    release_state: present
    release_values: "{{ elastic_opensearch_dashboards_values }}"

- name: "Wait for OpenSearch Dashboards rollout"
  when: elastic_opensearch_dashboards_wait_for_deployments | bool
  shell: "kubectl rollout status -n {{ elastic_opensearch_namespace }} {{ item }}"
  with_items:
    - "deployments/opensearch-dashboards"
